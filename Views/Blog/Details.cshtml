@model SmartCookFinal.Models.Blog

@{
	int? currentUserId = ViewBag.CurrentUserId as int?;
}


<div class="page-wraper">



	<!-- header END ==== -->
	<!-- Content -->
	<div class="page-content bg-white">
		<!-- inner page banner -->
		<div class="page-banner ovbl-dark" style="background-image:url(assets/images/banner/banner2.jpg);">
			<div class="container">
				<div class="page-banner-entry">
					<h1 class="text-white">Blog Details</h1>
				</div>
			</div>
		</div>

		<!-- Breadcrumb row -->
		<div class="breadcrumb-row">
			<div class="container">
				<ul class="list-inline">
					<li><a href="#">Home</a></li>
					<li>Blog Details</li>
				</ul>
			</div>
		</div>

		<!-- Breadcrumb row END -->
		<div class="content-block">
			<div class="section-area section-sp1">
				<div class="container">
					<div class="row">
						<!-- Left part start -->
						<div class="col-lg-8 col-xl-8">
							<!-- blog start -->
							<div class="recent-news blog-lg">
								<div class="action-box blog-lg">
									<img src="@Model.UrlImage" alt="">
								</div>
								<div class="info-bx">

									<ul class="media-post">
										<li><a href="#"><i class="fa fa-calendar"></i>@Model.CreatedAt</a></li>

									</ul>
									<h5 class="post-title">
										<a href="#" style="text-decoration: none;">@Model.Title</a>
									</h5>

									<p>@Model.Content</p>
									<p>@Model.Detail</p>
									<div class="ttr-divider bg-gray"><i class="icon-dot c-square"></i></div>
									<div class="widget_tag_cloud">
									</div>
									<div class="ttr-divider bg-gray"><i class="icon-dot c-square"></i></div>

									<div class="ttr-divider bg-gray"><i class="icon-dot c-square"></i></div>
								</div>
							</div>
							<div class="clear" id="comment-list">
								<div class="comments-area" id="comments">
									<h2 class="comments-title">
										@(Model.Comments?.Count() ?? 0) @((Model.Comments?.Count() ?? 0) == 1 ? "Comment" : "Comments")
									</h2>

									<div class="clearfix m-b20">
										<!-- comment list END -->
										
										<ol class="comment-list">
											@foreach (var comment in Model.Comments)
											{
												<li class="comment">
													<div class="comment-body">
														<div class="comment-author vcard">
															<img class="avatar photo" src="https://via.placeholder.com/50" alt="@comment.User.TenNguoiDung" />
															<cite class="fn">@comment.User.TenNguoiDung</cite>
															<span class="says">says:</span>
														</div>
														<div class="comment-meta">
															<a href="#">@comment.CommentedAt.ToString("MMMM dd, yyyy 'at' hh:mm tt")</a>
														</div>
														<p>@comment.CommentText</p>

														@if (currentUserId != null && comment.UserId == currentUserId)
														{
															<form asp-controller="Blog" asp-action="DeleteComment" method="post" style="display:inline;">
																<input type="hidden" name="commentId" value="@comment.BlogCommentId" />
																<input type="hidden" name="blogId" value="@Model.BlogId" />
																<button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure you want to delete this comment?');">
																	Delete
																</button>
															</form>
														}
													</div>
												</li>
											}

										</ol>



										<!-- comment list END -->

									</div>
								</div>

								<!-- comment form -->
								<h3 class="comments-title" style="font-size: 1.5rem; font-weight: 600; color: #5b2c6f; margin-bottom: 15px;">
									Leave a Comment
								</h3>
								<form asp-controller="Blog" asp-action="AddComment" method="post"
									  style="background: #f3e8ff; border: 1px solid #d7bce8; padding: 20px; border-radius: 8px;
             box-shadow: 0 2px 6px rgba(91, 44, 111, 0.1); margin-top: 20px;">

									<input type="hidden" name="BlogId" value="@Model.BlogId" />

									<div class="form-group" style="margin-bottom: 15px;">
										<label for="CommentText" style="font-weight: 500; color: #5b2c6f; display: block; margin-bottom: 5px;">
											Your Comment
										</label>
										<textarea name="CommentText" rows="4" required
												  style="width: 100%; border-radius: 6px; border: 1px solid #caa5e8; padding: 10px;
                         font-size: 1rem; resize: vertical; transition: border-color 0.3s ease;"
												  onfocus="this.style.borderColor='#9b59b6'; this.style.boxShadow='0 0 4px rgba(155,89,182,0.3)';"
												  onblur="this.style.borderColor='#caa5e8'; this.style.boxShadow='none';"></textarea>
									</div>

									<input type="submit" value="Post"
										   style="background-color: #9b59b6; border: none; color: white; padding: 10px 20px;
                  font-size: 1rem; border-radius: 5px; cursor: pointer;
                  transition: background-color 0.3s ease, transform 0.2s;"
										   onmouseover="this.style.backgroundColor='#7e3794'; this.style.transform='translateY(-1px)';"
										   onmouseout="this.style.backgroundColor='#9b59b6'; this.style.transform='none';" />
								</form>


								<!-- comment form -->


							</div>
							<!-- blog END -->
						</div>
						<!-- Left part END -->
						<!-- Side bar start -->
						<div class="col-lg-4 col-xl-4">
							<aside class="side-bar sticky-top">
								<div class="widget">
									<h6 class="widget-title">Search</h6>
									<div class="search-bx style-1">
										<form role="search" method="post">
											<div class="input-group">
												<input name="text" class="form-control" placeholder="Enter your keywords..." type="text">
												<span class="input-group-btn">
													<button type="submit" class="fa fa-search text-primary"></button>
												</span>
											</div>
										</form>
									</div>
								</div>


								<div class="widget recent-posts-entry">
									<h6 class="widget-title">Recent Posts</h6>
									<div class="widget-post-bx">
										@foreach (var post in (List<SmartCookFinal.Models.Blog>)ViewBag.RecentPosts)
										{
											<div class="widget-post clearfix">
												<div class="ttr-post-media">
													<a asp-controller="Blog" asp-action="Details" asp-route-id="@post.BlogId">
														<img src="@post.UrlImage" width="200" height="143" alt="@post.Title" />
													</a>
												</div>
												<div class="ttr-post-info">
													<div class="ttr-post-header">
														<h6 class="post-title">
															<a asp-controller="Blog" asp-action="Details" asp-route-id="@post.BlogId" style="text-decoration:none; color:inherit;">
																@post.Title
															</a>
														</h6>
													</div>
													<ul class="media-post">
														<li>
															<a href="#"><i class="fa fa-calendar"></i>@post.CreatedAt.ToString("MMM dd yyyy")</a>
														</li>

													</ul>
												</div>
											</div>
										}
									</div>
								</div>



							</aside>
						</div>
						<!-- Side bar END -->
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Content END-->


</div>